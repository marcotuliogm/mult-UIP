\hypertarget{group__memb}{
\section{Memory block management functions}
\label{group__memb}\index{Memory block management functions@{Memory block management functions}}
}
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structmemb__blocks}{memb\_\-blocks}
\end{DoxyCompactItemize}
\subsection*{Files}
\begin{DoxyCompactItemize}
\item 
file \hyperlink{memb_8c}{memb.c}
\item 
file \hyperlink{memb_8h}{memb.h}
\end{DoxyCompactItemize}
\subsection*{Defines}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{group__memb_gaa680bc3f3a1a8a6aec20fe729d138cb8}{MEMB\_\-CONCAT2}(\hyperlink{sft_8h_acfb6b9e2b00e34da4313b463c341e597}{s1}, s2)~\hyperlink{sft_8h_acfb6b9e2b00e34da4313b463c341e597}{s1}\#\#s2
\item 
\#define \hyperlink{group__memb_ga720ac440c7b24bdd07c53ba146e36fb2}{MEMB\_\-CONCAT}(\hyperlink{sft_8h_acfb6b9e2b00e34da4313b463c341e597}{s1}, s2)~MEMB\_\-CONCAT2(\hyperlink{sft_8h_acfb6b9e2b00e34da4313b463c341e597}{s1}, s2)
\item 
\#define \hyperlink{group__memb_gaf31774d02a69fd3f1c2b282454438cba}{MEMB}(name, structure, num)
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{group__memb_gad58a6c7e62ae59bf7a016ded12ca2910}{memb\_\-init} (struct \hyperlink{structmemb__blocks}{memb\_\-blocks} $\ast$m)
\item 
void $\ast$ \hyperlink{group__memb_gafe5e93119035e14cc485760a176249ba}{memb\_\-alloc} (struct \hyperlink{structmemb__blocks}{memb\_\-blocks} $\ast$m)
\item 
char \hyperlink{group__memb_gaceb952d27de8125d5146ac0bee325b8f}{memb\_\-free} (struct \hyperlink{structmemb__blocks}{memb\_\-blocks} $\ast$m, void $\ast$ptr)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Copyright (c) 2004, Swedish Institute of Computer Science. All rights reserved.

Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met: 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer. 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution. 3. Neither the name of the Institute nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE INSTITUTE AND CONTRIBUTORS ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE INSTITUTE OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

This file is part of the uIP TCP/IP stack

Author: Adam Dunkels $<$\href{mailto:adam@sics.se}{\tt adam@sics.se}$>$

\begin{DoxyParagraph}{Id:}
\hyperlink{memb_8h}{memb.h},v 1.1 2006/06/12 08:21:43 adam Exp 
\end{DoxyParagraph}


The memory block allocation routines provide a simple yet powerful set of functions for managing a set of memory blocks of fixed size. A set of memory blocks is statically declared with the \hyperlink{group__telnetd_ga8505bcbff8774c99458a328d8d2e9bc0}{MEMB()} macro. Memory blocks are allocated from the declared memory by the \hyperlink{group__memb_gafe5e93119035e14cc485760a176249ba}{memb\_\-alloc()} function, and are deallocated with the \hyperlink{group__memb_gaceb952d27de8125d5146ac0bee325b8f}{memb\_\-free()} function.

\begin{DoxyNote}{Note}
Because of namespace clashes only one \hyperlink{group__telnetd_ga8505bcbff8774c99458a328d8d2e9bc0}{MEMB()} can be declared per C module, and the name scope of a \hyperlink{group__telnetd_ga8505bcbff8774c99458a328d8d2e9bc0}{MEMB()} memory block is local to each C module.
\end{DoxyNote}
The following example shows how to declare and use a memory block called \char`\"{}cmem\char`\"{} which has 8 chunks of memory with each memory chunk being 20 bytes large.

Copyright (c) 2004, Swedish Institute of Computer Science. All rights reserved.

Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met: 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer. 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution. 3. Neither the name of the Institute nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE INSTITUTE AND CONTRIBUTORS ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE INSTITUTE OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

This file is part of the uIP TCP/IP stack

Author: Adam Dunkels $<$\href{mailto:adam@sics.se}{\tt adam@sics.se}$>$

\begin{DoxyParagraph}{Id:}
\hyperlink{memb_8c}{memb.c},v 1.1 2006/06/12 08:21:43 adam Exp 
\end{DoxyParagraph}


\subsection{Define Documentation}
\hypertarget{group__memb_gaf31774d02a69fd3f1c2b282454438cba}{
\index{memb@{memb}!MEMB@{MEMB}}
\index{MEMB@{MEMB}!memb@{memb}}
\subsubsection[{MEMB}]{\setlength{\rightskip}{0pt plus 5cm}\#define MEMB(
\begin{DoxyParamCaption}
\item[{}]{name, }
\item[{}]{structure, }
\item[{}]{num}
\end{DoxyParamCaption}
)}}
\label{group__memb_gaf31774d02a69fd3f1c2b282454438cba}
{\bfseries Value:}
\begin{DoxyCode}
static char MEMB_CONCAT(name,_memb_count)[num]; \
        static structure MEMB_CONCAT(name,_memb_mem)[num]; \
        static struct memb_blocks name = {sizeof(structure), num, \
                                          MEMB_CONCAT(name,_memb_count), \
                                          (void *)MEMB_CONCAT(name,_memb_mem)}
\end{DoxyCode}
Declare a memory block.

This macro is used to staticall declare a block of memory that can be used by the block allocation functions. The macro statically declares a C array with a size that matches the specified number of blocks and their individual sizes.

Example: 
\begin{DoxyCode}
MEMB(connections, sizeof(struct connection), 16);
\end{DoxyCode}



\begin{DoxyParams}{Parameters}
\item[{\em name}]The name of the memory block (later used with \hyperlink{group__memb_gad58a6c7e62ae59bf7a016ded12ca2910}{memb\_\-init()}, \hyperlink{group__memb_gafe5e93119035e14cc485760a176249ba}{memb\_\-alloc()} and \hyperlink{group__memb_gaceb952d27de8125d5146ac0bee325b8f}{memb\_\-free()}).\item[{\em size}]The size of each memory chunk, in bytes.\item[{\em num}]The total number of memory chunks in the block. \end{DoxyParams}


Definition at line 98 of file memb.h.

\hypertarget{group__memb_ga720ac440c7b24bdd07c53ba146e36fb2}{
\index{memb@{memb}!MEMB\_\-CONCAT@{MEMB\_\-CONCAT}}
\index{MEMB\_\-CONCAT@{MEMB\_\-CONCAT}!memb@{memb}}
\subsubsection[{MEMB\_\-CONCAT}]{\setlength{\rightskip}{0pt plus 5cm}\#define MEMB\_\-CONCAT(
\begin{DoxyParamCaption}
\item[{}]{{\bf s1}, }
\item[{}]{s2}
\end{DoxyParamCaption}
)~MEMB\_\-CONCAT2({\bf s1}, s2)}}
\label{group__memb_ga720ac440c7b24bdd07c53ba146e36fb2}


Definition at line 75 of file memb.h.

\hypertarget{group__memb_gaa680bc3f3a1a8a6aec20fe729d138cb8}{
\index{memb@{memb}!MEMB\_\-CONCAT2@{MEMB\_\-CONCAT2}}
\index{MEMB\_\-CONCAT2@{MEMB\_\-CONCAT2}!memb@{memb}}
\subsubsection[{MEMB\_\-CONCAT2}]{\setlength{\rightskip}{0pt plus 5cm}\#define MEMB\_\-CONCAT2(
\begin{DoxyParamCaption}
\item[{}]{{\bf s1}, }
\item[{}]{s2}
\end{DoxyParamCaption}
)~{\bf s1}\#\#s2}}
\label{group__memb_gaa680bc3f3a1a8a6aec20fe729d138cb8}


Definition at line 74 of file memb.h.



\subsection{Function Documentation}
\hypertarget{group__memb_gafe5e93119035e14cc485760a176249ba}{
\index{memb@{memb}!memb\_\-alloc@{memb\_\-alloc}}
\index{memb\_\-alloc@{memb\_\-alloc}!memb@{memb}}
\subsubsection[{memb\_\-alloc}]{\setlength{\rightskip}{0pt plus 5cm}void $\ast$ memb\_\-alloc (
\begin{DoxyParamCaption}
\item[{struct {\bf memb\_\-blocks} $\ast$}]{ m}
\end{DoxyParamCaption}
)}}
\label{group__memb_gafe5e93119035e14cc485760a176249ba}
Allocate a memory block from a block of memory declared with \hyperlink{group__memb_gaf31774d02a69fd3f1c2b282454438cba}{MEMB()}.


\begin{DoxyParams}{Parameters}
\item[{\em m}]A memory block previosly declared with \hyperlink{group__memb_gaf31774d02a69fd3f1c2b282454438cba}{MEMB()}. \end{DoxyParams}
\hypertarget{group__memb_gaceb952d27de8125d5146ac0bee325b8f}{
\index{memb@{memb}!memb\_\-free@{memb\_\-free}}
\index{memb\_\-free@{memb\_\-free}!memb@{memb}}
\subsubsection[{memb\_\-free}]{\setlength{\rightskip}{0pt plus 5cm}char memb\_\-free (
\begin{DoxyParamCaption}
\item[{struct {\bf memb\_\-blocks} $\ast$}]{ m, }
\item[{void $\ast$}]{ ptr}
\end{DoxyParamCaption}
)}}
\label{group__memb_gaceb952d27de8125d5146ac0bee325b8f}
Deallocate a memory block from a memory block previously declared with \hyperlink{group__memb_gaf31774d02a69fd3f1c2b282454438cba}{MEMB()}.


\begin{DoxyParams}{Parameters}
\item[{\em m}]m A memory block previosly declared with \hyperlink{group__memb_gaf31774d02a69fd3f1c2b282454438cba}{MEMB()}.\item[{\em ptr}]A pointer to the memory block that is to be deallocated.\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The new reference count for the memory block (should be 0 if successfully deallocated) or -\/1 if the pointer \char`\"{}ptr\char`\"{} did not point to a legal memory block. 
\end{DoxyReturn}
\hypertarget{group__memb_gad58a6c7e62ae59bf7a016ded12ca2910}{
\index{memb@{memb}!memb\_\-init@{memb\_\-init}}
\index{memb\_\-init@{memb\_\-init}!memb@{memb}}
\subsubsection[{memb\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}void memb\_\-init (
\begin{DoxyParamCaption}
\item[{struct {\bf memb\_\-blocks} $\ast$}]{ m}
\end{DoxyParamCaption}
)}}
\label{group__memb_gad58a6c7e62ae59bf7a016ded12ca2910}
Initialize a memory block that was declared with \hyperlink{group__memb_gaf31774d02a69fd3f1c2b282454438cba}{MEMB()}.


\begin{DoxyParams}{Parameters}
\item[{\em m}]A memory block previosly declared with \hyperlink{group__memb_gaf31774d02a69fd3f1c2b282454438cba}{MEMB()}. \end{DoxyParams}
