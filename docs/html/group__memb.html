<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Mult-UIP: Memory block management functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#files">Files</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>Memory block management functions</h1>  </div>
</div>
<div class="contents">
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmemb__blocks.html">memb_blocks</a></td></tr>
<tr><td colspan="2"><h2><a name="files"></a>
Files</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="memb_8c.html">memb.c</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="memb_8h.html">memb.h</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__memb.html#gaa680bc3f3a1a8a6aec20fe729d138cb8">MEMB_CONCAT2</a>(<a class="el" href="sft_8h.html#acfb6b9e2b00e34da4313b463c341e597">s1</a>, s2)&nbsp;&nbsp;&nbsp;<a class="el" href="sft_8h.html#acfb6b9e2b00e34da4313b463c341e597">s1</a>##s2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__memb.html#ga720ac440c7b24bdd07c53ba146e36fb2">MEMB_CONCAT</a>(<a class="el" href="sft_8h.html#acfb6b9e2b00e34da4313b463c341e597">s1</a>, s2)&nbsp;&nbsp;&nbsp;MEMB_CONCAT2(<a class="el" href="sft_8h.html#acfb6b9e2b00e34da4313b463c341e597">s1</a>, s2)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__memb.html#gaf31774d02a69fd3f1c2b282454438cba">MEMB</a>(name, structure, num)</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__memb.html#gad58a6c7e62ae59bf7a016ded12ca2910">memb_init</a> (struct <a class="el" href="structmemb__blocks.html">memb_blocks</a> *m)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__memb.html#gafe5e93119035e14cc485760a176249ba">memb_alloc</a> (struct <a class="el" href="structmemb__blocks.html">memb_blocks</a> *m)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__memb.html#gaceb952d27de8125d5146ac0bee325b8f">memb_free</a> (struct <a class="el" href="structmemb__blocks.html">memb_blocks</a> *m, void *ptr)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Copyright (c) 2004, Swedish Institute of Computer Science. All rights reserved.</p>
<p>Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met: 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer. 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution. 3. Neither the name of the Institute nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</p>
<p>THIS SOFTWARE IS PROVIDED BY THE INSTITUTE AND CONTRIBUTORS ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE INSTITUTE OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
<p>This file is part of the uIP TCP/IP stack</p>
<p>Author: Adam Dunkels &lt;<a href="mailto:adam@sics.se">adam@sics.se</a>&gt;</p>
<dl class="rcs"><dt><b>Id:</b></dt><dd><a class="el" href="memb_8h.html">memb.h</a>,v 1.1 2006/06/12 08:21:43 adam Exp </dd></dl>
<p>The memory block allocation routines provide a simple yet powerful set of functions for managing a set of memory blocks of fixed size. A set of memory blocks is statically declared with the <a class="el" href="group__telnetd.html#ga8505bcbff8774c99458a328d8d2e9bc0">MEMB()</a> macro. Memory blocks are allocated from the declared memory by the <a class="el" href="group__memb.html#gafe5e93119035e14cc485760a176249ba">memb_alloc()</a> function, and are deallocated with the <a class="el" href="group__memb.html#gaceb952d27de8125d5146ac0bee325b8f">memb_free()</a> function.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>Because of namespace clashes only one <a class="el" href="group__telnetd.html#ga8505bcbff8774c99458a328d8d2e9bc0">MEMB()</a> can be declared per C module, and the name scope of a <a class="el" href="group__telnetd.html#ga8505bcbff8774c99458a328d8d2e9bc0">MEMB()</a> memory block is local to each C module.</dd></dl>
<p>The following example shows how to declare and use a memory block called "cmem" which has 8 chunks of memory with each memory chunk being 20 bytes large.</p>
<p>Copyright (c) 2004, Swedish Institute of Computer Science. All rights reserved.</p>
<p>Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met: 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer. 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution. 3. Neither the name of the Institute nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</p>
<p>THIS SOFTWARE IS PROVIDED BY THE INSTITUTE AND CONTRIBUTORS ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE INSTITUTE OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
<p>This file is part of the uIP TCP/IP stack</p>
<p>Author: Adam Dunkels &lt;<a href="mailto:adam@sics.se">adam@sics.se</a>&gt;</p>
<dl class="rcs"><dt><b>Id:</b></dt><dd><a class="el" href="memb_8c.html">memb.c</a>,v 1.1 2006/06/12 08:21:43 adam Exp </dd></dl>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="gaf31774d02a69fd3f1c2b282454438cba"></a><!-- doxytag: member="memb.h::MEMB" ref="gaf31774d02a69fd3f1c2b282454438cba" args="(name, structure, num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MEMB</td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname">name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname">structure, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname">num</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="group__memb.html#ga720ac440c7b24bdd07c53ba146e36fb2">MEMB_CONCAT</a>(name,_memb_count)[num]; \
        <span class="keyword">static</span> structure <a class="code" href="group__memb.html#ga720ac440c7b24bdd07c53ba146e36fb2">MEMB_CONCAT</a>(name,_memb_mem)[num]; \
        <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structmemb__blocks.html">memb_blocks</a> name = {<span class="keyword">sizeof</span>(structure), <a class="code" href="structmemb__blocks.html#a164124d48fe85bc98d9a300382a5245d">num</a>, \
                                          <a class="code" href="group__memb.html#ga720ac440c7b24bdd07c53ba146e36fb2">MEMB_CONCAT</a>(name,_memb_count), \
                                          (<span class="keywordtype">void</span> *)<a class="code" href="group__memb.html#ga720ac440c7b24bdd07c53ba146e36fb2">MEMB_CONCAT</a>(name,_memb_mem)}
</pre></div><p>Declare a memory block.</p>
<p>This macro is used to staticall declare a block of memory that can be used by the block allocation functions. The macro statically declares a C array with a size that matches the specified number of blocks and their individual sizes.</p>
<p>Example: </p>
<div class="fragment"><pre class="fragment"><a class="code" href="group__memb.html#gaf31774d02a69fd3f1c2b282454438cba">MEMB</a>(connections, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> connection), 16);
</pre></div><dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>The name of the memory block (later used with <a class="el" href="group__memb.html#gad58a6c7e62ae59bf7a016ded12ca2910">memb_init()</a>, <a class="el" href="group__memb.html#gafe5e93119035e14cc485760a176249ba">memb_alloc()</a> and <a class="el" href="group__memb.html#gaceb952d27de8125d5146ac0bee325b8f">memb_free()</a>).</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>The size of each memory chunk, in bytes.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>num</em>&nbsp;</td><td>The total number of memory chunks in the block. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="memb_8h_source.html#l00098">98</a> of file <a class="el" href="memb_8h_source.html">memb.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga720ac440c7b24bdd07c53ba146e36fb2"></a><!-- doxytag: member="memb.h::MEMB_CONCAT" ref="ga720ac440c7b24bdd07c53ba146e36fb2" args="(s1, s2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MEMB_CONCAT</td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"><a class="el" href="sft_8h.html#acfb6b9e2b00e34da4313b463c341e597">s1</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname">s2</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td>&nbsp;&nbsp;&nbsp;MEMB_CONCAT2(<a class="el" href="sft_8h.html#acfb6b9e2b00e34da4313b463c341e597">s1</a>, s2)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="memb_8h_source.html#l00075">75</a> of file <a class="el" href="memb_8h_source.html">memb.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaa680bc3f3a1a8a6aec20fe729d138cb8"></a><!-- doxytag: member="memb.h::MEMB_CONCAT2" ref="gaa680bc3f3a1a8a6aec20fe729d138cb8" args="(s1, s2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MEMB_CONCAT2</td>
          <td>(</td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"><a class="el" href="sft_8h.html#acfb6b9e2b00e34da4313b463c341e597">s1</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname">s2</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td>&nbsp;&nbsp;&nbsp;<a class="el" href="sft_8h.html#acfb6b9e2b00e34da4313b463c341e597">s1</a>##s2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="memb_8h_source.html#l00074">74</a> of file <a class="el" href="memb_8h_source.html">memb.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gafe5e93119035e14cc485760a176249ba"></a><!-- doxytag: member="memb.c::memb_alloc" ref="gafe5e93119035e14cc485760a176249ba" args="(struct memb_blocks *m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * memb_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmemb__blocks.html">memb_blocks</a> *&nbsp;</td>
          <td class="paramname"> <em>m</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Allocate a memory block from a block of memory declared with <a class="el" href="group__memb.html#gaf31774d02a69fd3f1c2b282454438cba">MEMB()</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>m</em>&nbsp;</td><td>A memory block previosly declared with <a class="el" href="group__memb.html#gaf31774d02a69fd3f1c2b282454438cba">MEMB()</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gaceb952d27de8125d5146ac0bee325b8f"></a><!-- doxytag: member="memb.c::memb_free" ref="gaceb952d27de8125d5146ac0bee325b8f" args="(struct memb_blocks *m, void *ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char memb_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmemb__blocks.html">memb_blocks</a> *&nbsp;</td>
          <td class="paramname"> <em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>ptr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Deallocate a memory block from a memory block previously declared with <a class="el" href="group__memb.html#gaf31774d02a69fd3f1c2b282454438cba">MEMB()</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>m</em>&nbsp;</td><td>m A memory block previosly declared with <a class="el" href="group__memb.html#gaf31774d02a69fd3f1c2b282454438cba">MEMB()</a>.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ptr</em>&nbsp;</td><td>A pointer to the memory block that is to be deallocated.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The new reference count for the memory block (should be 0 if successfully deallocated) or -1 if the pointer "ptr" did not point to a legal memory block. </dd></dl>

</div>
</div>
<a class="anchor" id="gad58a6c7e62ae59bf7a016ded12ca2910"></a><!-- doxytag: member="memb.c::memb_init" ref="gad58a6c7e62ae59bf7a016ded12ca2910" args="(struct memb_blocks *m)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void memb_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmemb__blocks.html">memb_blocks</a> *&nbsp;</td>
          <td class="paramname"> <em>m</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize a memory block that was declared with <a class="el" href="group__memb.html#gaf31774d02a69fd3f1c2b282454438cba">MEMB()</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>m</em>&nbsp;</td><td>A memory block previosly declared with <a class="el" href="group__memb.html#gaf31774d02a69fd3f1c2b282454438cba">MEMB()</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Jun 17 2011 01:55:44 for Mult-UIP by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
