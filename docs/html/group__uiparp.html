<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Mult-UIP: uIP Address Resolution Protocol</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#files">Files</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<h1>uIP Address Resolution Protocol<br/>
<small>
[<a class="el" href="group__uip.html">The uIP TCP/IP stack</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p><div class="dynheader">
Collaboration diagram for uIP Address Resolution Protocol:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__uiparp.png" border="0" alt="" usemap="#group____uiparp"/>
<map name="group____uiparp" id="group____uiparp">
<area shape="rect" id="node2" href="group__uip.html" title="The uIP TCP/IP stack" alt="" coords="7,5,153,35"/></map>
</td></tr></table></center>
</div>
</p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structarp__hdr.html">arp_hdr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structethip__hdr.html">ethip_hdr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structarp__entry.html">arp_entry</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structuip__eth__hdr.html">uip_eth_hdr</a></td></tr>
<tr><td colspan="2"><h2><a name="files"></a>
Files</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uip__arp_8c.html">uip_arp.c</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">file &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="uip__arp_8h.html">uip_arp.h</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__uiparp.html#ga7a7c46ffaba30477b8c9e3e61bd2e106">ARP_REQUEST</a>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__uiparp.html#ga06ba7b414e718081998f2814090debf1">ARP_REPLY</a>&nbsp;&nbsp;&nbsp;2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__uiparp.html#gabb56b549f7ab4d86e1cc39b8afc70d1e">ARP_HWTYPE_ETH</a>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__uiparp.html#ga24f52ac52d6e714cb04a5aa01be3bdd0">BUF</a>&nbsp;&nbsp;&nbsp;((struct <a class="el" href="structarp__hdr.html">arp_hdr</a> *)&amp;<a class="el" href="group__uipdevfunc.html#gab81e78f890dbbee50c533a9734b74fd9">uip_buf</a>[0])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__uiparp.html#ga9f2196e2705036869611962425e404bf">IPBUF</a>&nbsp;&nbsp;&nbsp;((struct <a class="el" href="structethip__hdr.html">ethip_hdr</a> *)&amp;<a class="el" href="group__uipdevfunc.html#gab81e78f890dbbee50c533a9734b74fd9">uip_buf</a>[0])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__uiparp.html#ga3e1562e8a6de32268e5df92a52152f91">UIP_ETHTYPE_ARP</a>&nbsp;&nbsp;&nbsp;0x0806</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__uiparp.html#ga03d140db75de3d3cdfbbab1c4fed8d8d">UIP_ETHTYPE_IP</a>&nbsp;&nbsp;&nbsp;0x0800</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__uiparp.html#gabb558f3a9b1ec015e83c314aba694e35">UIP_ETHTYPE_IP6</a>&nbsp;&nbsp;&nbsp;0x86dd</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__uiparp.html#ga2d9d28afa353f662b9bb5234fc419f72">uip_arp_init</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__uiparp.html#ga058a8e6025f67b021862281f1911fcef">uip_arp_timer</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__uiparp.html#ga5cf8d6974a89ad67c5faf9b19261cb7c">uip_arp_ipin</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__uiparp.html#ga902c4a360134096224bc2655f623aa5f">uip_arp_arpin</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__uiparp.html#ga54b27e45df15e10a0eb1a3e3a91417d2">uip_arp_out</a> (void)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structarp__hdr.html">arp_hdr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__uiparp.html#ga61953c615dbf189b18855737b02471ff">PACK_STRUCT_END</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structuip__eth__addr.html">uip_eth_addr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__uiparp.html#ga499bb98a0b4ae9a98553ede81317606d">uip_ethaddr</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structuip__eth__hdr.html">uip_eth_hdr</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__uiparp.html#ga1c9b41c7403c38cd943ecf0a91543119">PACK_STRUCT_END</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>The Address Resolution Protocol ARP is used for mapping between IP addresses and link level addresses such as the Ethernet MAC addresses. ARP uses broadcast queries to ask for the link level address of a known IP address and the host which is configured with the IP address for which the query was meant, will respond with its link level address.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>This ARP implementation only supports Ethernet. </dd></dl>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="gabb56b549f7ab4d86e1cc39b8afc70d1e"></a><!-- doxytag: member="uip_arp.c::ARP_HWTYPE_ETH" ref="gabb56b549f7ab4d86e1cc39b8afc70d1e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ARP_HWTYPE_ETH&nbsp;&nbsp;&nbsp;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uip__arp_8c_source.html#l00113">113</a> of file <a class="el" href="uip__arp_8c_source.html">uip_arp.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga06ba7b414e718081998f2814090debf1"></a><!-- doxytag: member="uip_arp.c::ARP_REPLY" ref="ga06ba7b414e718081998f2814090debf1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ARP_REPLY&nbsp;&nbsp;&nbsp;2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uip__arp_8c_source.html#l00111">111</a> of file <a class="el" href="uip__arp_8c_source.html">uip_arp.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga7a7c46ffaba30477b8c9e3e61bd2e106"></a><!-- doxytag: member="uip_arp.c::ARP_REQUEST" ref="ga7a7c46ffaba30477b8c9e3e61bd2e106" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ARP_REQUEST&nbsp;&nbsp;&nbsp;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uip__arp_8c_source.html#l00110">110</a> of file <a class="el" href="uip__arp_8c_source.html">uip_arp.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga24f52ac52d6e714cb04a5aa01be3bdd0"></a><!-- doxytag: member="uip_arp.c::BUF" ref="ga24f52ac52d6e714cb04a5aa01be3bdd0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BUF&nbsp;&nbsp;&nbsp;((struct <a class="el" href="structarp__hdr.html">arp_hdr</a> *)&amp;<a class="el" href="group__uipdevfunc.html#gab81e78f890dbbee50c533a9734b74fd9">uip_buf</a>[0])</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uip__arp_8c_source.html#l00132">132</a> of file <a class="el" href="uip__arp_8c_source.html">uip_arp.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga9f2196e2705036869611962425e404bf"></a><!-- doxytag: member="uip_arp.c::IPBUF" ref="ga9f2196e2705036869611962425e404bf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IPBUF&nbsp;&nbsp;&nbsp;((struct <a class="el" href="structethip__hdr.html">ethip_hdr</a> *)&amp;<a class="el" href="group__uipdevfunc.html#gab81e78f890dbbee50c533a9734b74fd9">uip_buf</a>[0])</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uip__arp_8c_source.html#l00133">133</a> of file <a class="el" href="uip__arp_8c_source.html">uip_arp.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga3e1562e8a6de32268e5df92a52152f91"></a><!-- doxytag: member="uip_arp.h::UIP_ETHTYPE_ARP" ref="ga3e1562e8a6de32268e5df92a52152f91" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UIP_ETHTYPE_ARP&nbsp;&nbsp;&nbsp;0x0806</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uip__arp_8h_source.html#l00077">77</a> of file <a class="el" href="uip__arp_8h_source.html">uip_arp.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga03d140db75de3d3cdfbbab1c4fed8d8d"></a><!-- doxytag: member="uip_arp.h::UIP_ETHTYPE_IP" ref="ga03d140db75de3d3cdfbbab1c4fed8d8d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UIP_ETHTYPE_IP&nbsp;&nbsp;&nbsp;0x0800</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uip__arp_8h_source.html#l00078">78</a> of file <a class="el" href="uip__arp_8h_source.html">uip_arp.h</a>.</p>

</div>
</div>
<a class="anchor" id="gabb558f3a9b1ec015e83c314aba694e35"></a><!-- doxytag: member="uip_arp.h::UIP_ETHTYPE_IP6" ref="gabb558f3a9b1ec015e83c314aba694e35" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UIP_ETHTYPE_IP6&nbsp;&nbsp;&nbsp;0x86dd</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uip__arp_8h_source.html#l00079">79</a> of file <a class="el" href="uip__arp_8h_source.html">uip_arp.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga902c4a360134096224bc2655f623aa5f"></a><!-- doxytag: member="uip_arp.c::uip_arp_arpin" ref="ga902c4a360134096224bc2655f623aa5f" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uip_arp_arpin </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>ARP processing for incoming ARP packets.</p>
<p>This function should be called by the device driver when an ARP packet has been received. The function will act differently depending on the ARP packet type: if it is a reply for a request that we previously sent out, the ARP cache will be filled in with the values from the ARP reply. If the incoming ARP packet is an ARP request for our IP address, an ARP reply packet is created and put into the uip_buf[] buffer.</p>
<p>When the function returns, the value of the global variable uip_len indicates whether the device driver should send out a packet or not. If uip_len is zero, no packet should be sent. If uip_len is non-zero, it contains the length of the outbound packet that is present in the uip_buf[] buffer.</p>
<p>This function expects an ARP packet with a prepended Ethernet header in the uip_buf[] buffer, and the length of the packet in the global variable uip_len. </p>

</div>
</div>
<a class="anchor" id="ga2d9d28afa353f662b9bb5234fc419f72"></a><!-- doxytag: member="uip_arp.c::uip_arp_init" ref="ga2d9d28afa353f662b9bb5234fc419f72" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uip_arp_init </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize the ARP module. </p>

</div>
</div>
<a class="anchor" id="ga5cf8d6974a89ad67c5faf9b19261cb7c"></a><!-- doxytag: member="uip_arp.c::uip_arp_ipin" ref="ga5cf8d6974a89ad67c5faf9b19261cb7c" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uip_arp_ipin </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>ARP processing for incoming IP packets</p>
<p>This function should be called by the device driver when an IP packet has been received. The function will check if the address is in the ARP cache, and if so the ARP cache entry will be refreshed. If no ARP cache entry was found, a new one is created.</p>
<p>This function expects an IP packet with a prepended Ethernet header in the uip_buf[] buffer, and the length of the packet in the global variable uip_len. </p>

</div>
</div>
<a class="anchor" id="ga54b27e45df15e10a0eb1a3e3a91417d2"></a><!-- doxytag: member="uip_arp.c::uip_arp_out" ref="ga54b27e45df15e10a0eb1a3e3a91417d2" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uip_arp_out </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Prepend Ethernet header to an outbound IP packet and see if we need to send out an ARP request.</p>
<p>This function should be called before sending out an IP packet. The function checks the destination IP address of the IP packet to see what Ethernet MAC address that should be used as a destination MAC address on the Ethernet.</p>
<p>If the destination IP address is in the local network (determined by logical ANDing of netmask and our IP address), the function checks the ARP cache to see if an entry for the destination IP address is found. If so, an Ethernet header is prepended and the function returns. If no ARP cache entry is found for the destination IP address, the packet in the uip_buf[] is replaced by an ARP request packet for the IP address. The IP packet is dropped and it is assumed that they higher level protocols (e.g., TCP) eventually will retransmit the dropped packet.</p>
<p>If the destination IP address is not on the local network, the IP address of the default router is used instead.</p>
<p>When the function returns, a packet is present in the uip_buf[] buffer, and the length of the packet is in the global variable uip_len. </p>

</div>
</div>
<a class="anchor" id="ga058a8e6025f67b021862281f1911fcef"></a><!-- doxytag: member="uip_arp.c::uip_arp_timer" ref="ga058a8e6025f67b021862281f1911fcef" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void uip_arp_timer </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Periodic ARP processing function.</p>
<p>This function performs periodic timer processing in the ARP module and should be called at regular intervals. The recommended interval is 10 seconds between the calls. </p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ga1c9b41c7403c38cd943ecf0a91543119"></a><!-- doxytag: member="uip_arp.h::PACK_STRUCT_END" ref="ga1c9b41c7403c38cd943ecf0a91543119" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structuip__eth__hdr.html">uip_eth_hdr</a> <a class="el" href="group__uiparp.html#ga1c9b41c7403c38cd943ecf0a91543119">PACK_STRUCT_END</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The Ethernet header. </p>

</div>
</div>
<a class="anchor" id="ga61953c615dbf189b18855737b02471ff"></a><!-- doxytag: member="uip_arp.c::PACK_STRUCT_END" ref="ga61953c615dbf189b18855737b02471ff" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structethip__hdr.html">ethip_hdr</a>  <a class="el" href="group__uiparp.html#ga1c9b41c7403c38cd943ecf0a91543119">PACK_STRUCT_END</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ga499bb98a0b4ae9a98553ede81317606d"></a><!-- doxytag: member="uip_arp.h::uip_ethaddr" ref="ga499bb98a0b4ae9a98553ede81317606d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structuip__eth__addr.html">uip_eth_addr</a> <a class="el" href="group__uiparp.html#ga499bb98a0b4ae9a98553ede81317606d">uip_ethaddr</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="uip_8c_source.html#l00134">134</a> of file <a class="el" href="uip_8c_source.html">uip.c</a>.</p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Jun 17 2011 01:55:44 for Mult-UIP by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
